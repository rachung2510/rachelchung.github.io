<html>
    <head>
        <title>Rachel Chung Interactive Portfolio</title>
        <meta name="viewport" content="minimum-scale=1">
        <link rel="apple-touch-icon" sizes="57x57" href="./images/favicons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="./images/favicons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="./images/favicons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="./images/favicons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="./images/favicons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="./images/favicons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="./images/favicons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="./images/favicons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="./images/favicons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="./favicons/images/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="./images/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="./images/favicons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./images/favicons/favicon-16x16.png">
        <link rel="manifest" href="./images/favicons/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="./images/favicons/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <link rel="stylesheet" href="mportfolio style.css"/>
    </head>
    <body>
        <img class="astronaut" src="./images/astronaut.png">
        <div class="wrapper">
            <div class="loader">
                <span class="loader-wheel"></span>
                <style>
                    
                </style>
            </div>
            <div class="slide one">
                <img class="planets" src="./images/planets/planets1.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon1.png">
                <div class="blink-line">Please view in landscape for the best experience<br>Scroll right to see more</div>
            </div>
            <div class="slide two">
                <img class="planets" src="./images/planets/planets2.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon2.png">
            </div>
            <div class="slide three">
                <img class="addons" src="./images/addons/addon3.png">
                <div class="grid programming">
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"><img src="./images/ufo1.png"></div>
                    <div class="grid-item"></div>
                </div>
            </div>
            <div class="slide four">
                <img class="addons" src="./images/addons/addon4.png">
                <div class="grid graphic">
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"><img src="./images/ufo2.png"></div>
                    <div class="grid-item"></div>
                    <div class="grid-item"></div>
                </div>
            </div>
            <div class="slide five">
                <img class="planets" src="./images/planets/planets5.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon5.png">
            </div>
            <div class="slide six">
                <img class="planets" src="./images/planets/planets6.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon6.png">
            </div>
            <div class="slide seven" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro">
                        <span class="bloodhound-intro"
                            data-text="F1 IN SCHOOLS COMPETITION BLOODHOUND CATEGORY">
                        </span><span class="bloodhound-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/bloodhound1.png">
                    </div>
                    <div class="text content">
                        <ul>
                            <li>STEM competition where teams design and race their own F1 models</li>
                            <li>Achieved <i>Gold award</i> and <i>Best Portfolio</i></li>
                            <li>First foray into CAD design and analysis</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide eight">
                <img class="planets" src="./images/planets/planets8.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon8.png">
            </div>
            <div class="slide nine" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro">
                        <span class="nationals-intro"
                            data-text="F1 IN SCHOOLS COMPETITION NATIONALS">
                        </span><span class="nationals-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/nationals1.png">
                    </div>
                    <!--<div data-diagram="nationals"></div>-->
                    <div class="text content">
                        <ul>
                            <li>Achieved <i>Fastest Car</i> and <i>Overall Second</i></li>
                            <li>Awarded <i>Best Engineered Car</i> for innovation on car wheels that improved suspension on the track</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide ten">
                <img class="planets" src="./images/planets/planets10.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon10.png">
            </div>
            <div class="slide eleven" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro">
                        <span class="dip-intro"
                            data-text="Internship @ NUS Design Incubation Center">
                        </span><span class="dip-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/dip2.png">
                    </div>
                    <!--<div data-diagram="dip"></div>-->
                    <div class="text content">
                        <ul>
                            <li>Familiarisation with product design, brainstorming and prototyping methods, e.g. silicon molding, 3D-printing</li>
                            <li>Conceived a UIUX for a mobile 3D CAD software with cloud capabilities</li>
                            <li>Constructed a prototype of a utensil holder that aimed to facilitate easy access to utensils</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide twelve">
                <img class="planets" src="./images/planets/planets12.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon12.png">
            </div>
            <div class="slide thirteen" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro">
                        <span class="ydsp-intro"
                            data-text="RESEARCH @ YOUTH DEFENCE SCIENCE PROGRAMME">
                        </span><span class="ydsp-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/ydsp1.png">
                    </div>
                    <!--<div data-diagram="ydsp"></div>-->
                    <div class="text content">
                        <ul>
                            <li>Organised by Defence Science and Technology Agency (DSTA)</li>
                            <li>Project focused on the analysis of the motion of a bio-inspired air vehicle (MAV)</li>
                            <li>By controlling the wing angle and wing-flapping frequency to affect its pitch, yaw and roll, the MAV could move in all three axes</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide fourteen">
                <img class="planets" src="./images/planets/planets14.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon14.png">
            </div>
            <div class="slide fifteen" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro">
                        <span class="clock-intro"
                            data-text="5th Singapore International 3D Printing Competition">
                        </span><span class="clock-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/clock assembly1.png">
                    </div>
                    <!--<div data-diagram="clock"></div>-->
                    <div class="text content">
                        <p>
                            Inspired by the melting clock in Salvador Dali's &ldquo;The Persistance of Memory&rdquo;, the hand mesh grasping onto the melting clock depicts our futile attempt to control time.
                        <p>
                    </div>
                </div>
            </div>
            <div class="slide sixteen">
                <img class="planets" src="./images/planets/planets16.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon16.png">
            </div>
            <div class="slide seventeen" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro">
                        <span class="yep-intro"
                            data-text="ST Engineering Young Engineers' Programme">
                        </span><span class="yep-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/yep1.png">
                    </div>
                    <!--<div data-diagram="yep"></div>-->
                    <div class="text content">
                        <ul>
                            <li>Awarded the YEP scholarship by ST Engineering</li>
                            <li>Participated in an attachment which comprised visits to ST Electronics, ST Marine, ST Aerospace and ST Kinetics</li>
                            <li>Familiarisation with the various facilities and modus operandi of different departments, culminating in a presentation to the directors</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide eighteen">
                <img class="planets" src="./images/planets/planets18.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon18.png">
            </div>
            <div class="slide nineteen" data-done="false">
                <div class="move-down">
                    <img src="./images/move_down.png">
                    <p class="text intro" style="height: calc(8*var(--h))">
                        <span class="piano-intro"
                            data-text="3D-printed piano with music box">
                        </span><span class="piano-intro cursor active">_</span>
                    </p>
                    <div class="diagram">
                        <img src="./images/renders/piano1.png">
                    </div>
                    <!--<div data-diagram="piano"></div>-->
                    <div class="text content">
                        <ul>
                            <li>Designed as a gift for a friend, the 3d-printed piano houses a customised music box</li>
                            <li>3d-printed rotating cylinder was modified based on a self-arrangement of a certain tune</li>
                            <li>Music comb was tuned to the specific notes by soldering on or filing off metal to change the pitch</li>
                        </ul>
                        <p class="small-text">Much thanks to <a style="color:#81ecec" href="https://belalmksaid.github.io">Belal Said</a> for his to-scale CAD model of the music box</p>
                    </div>
                </div>
            </div>
            <div class="slide twenty">
                <img class="planets long" src="./images/planets/planets20.png" data-speed=0.3>
                <img class="addons" src="./images/addons/addon20.png">
                <div class="fireworks left">
                    <div class="radial-item itemA"></div>
                    <div class="radial-item itemB"></div>
                    <div class="radial-item itemC"></div>
                    <div class="radial-item itemD"></div>
                    <div class="radial-item itemE"></div>
                    <div class="radial-item itemF"></div>
                </div>
                <div class="fireworks right">
                    <div class="radial-item itemG"></div>
                    <div class="radial-item itemH"></div>
                    <div class="radial-item itemJ"></div>
                    <div class="radial-item itemK"></div>
                    <div class="radial-item itemL"></div>
                    <div class="radial-item itemM"></div>
                </div>
                <a href="index.html" class="return">Return to home</a>
            </div>
        </div>

        <script>
            // resize screen
            const slides = document.querySelectorAll(".slide");
            const addons = document.querySelectorAll(".addons");
            const planets = document.querySelectorAll(".planets");
            const astronaut = document.querySelector('.astronaut');
            resizeSlides();

            window.addEventListener('resize', resizeSlides);

            function resizeSlides() {
                slides.forEach(slide => {
                    slide.style.height = window.innerHeight + "px";
                    slide.style.minWidth = 1.97*window.innerHeight + "px";
                    slide.style.maxWidth = 1.97*window.innerHeight + "px";
                });
                addons.forEach(addon => {
                    addon.style.height = window.innerHeight + "px";
                    addon.style.width = 1.97*window.innerHeight + "px";
                });
                planets.forEach(planet => {
                    planet.style.height = window.innerHeight + "px";
                    planet.style.width = 1.97*window.innerHeight + "px";
                });
                let root = document.documentElement;
                root.style.setProperty('--h', 0.01*window.innerHeight+"px");
                root.style.setProperty('--w', 0.01*window.innerWidth+"px");

            }

            // detect slide
            var hasIntersection;
            setInterval(scroll, 10);
            function scroll() {
                // check current slide
                slides.forEach(slide => {
                    var xy = slide.getBoundingClientRect();
                    if (xy.left > -window.innerHeight*0.98 && xy.left < window.innerWidth
                        && xy.right < window.innerWidth+(window.innerHeight*1.47)) {
                        isIntersecting(slide, true);
                    } else {
                        isIntersecting(slide, false);
                    }

                    // parallax scrolling
                    let ref_xy = slide.getBoundingClientRect();
                    let elem = slide.querySelector(".planets");
                    if (elem != null) {
                        let speed = elem.dataset.speed;
                        elem.style.transform = `translateX(${ref_xy.x * speed}px)`;
                    }

                    // astronaut intersection
                    if (hasIntersection) {
                        astronaut.classList.add('opacity');
                    } else {
                        if (astronaut.classList.contains('opacity'))
                            astronaut.classList.remove('opacity');
                    }
                });
            }

            // stop blink line
            window.addEventListener('touchstart', () => {
                var blink_line = document.getElementsByClassName('blink-line')[0];
                blink_line.style.color = 'transparent';
            });

            // slide on screen
            function isIntersecting(entry, bool) {
                if (bool) {
                    slideAnim(entry);

                    // move down
                    if (entry.firstChild && entry.children[0].classList.contains("move-down")) {
                        move_down = entry.children[0];
                        if (entry.children[0].className == "move-down")
                            move_down.classList.add('active');
                        let xy = move_down.getBoundingClientRect();
                        let astronaut_xy = astronaut.getBoundingClientRect();
                        if (astronaut_xy.right > xy.left && astronaut_xy.right < (xy.left + 1.47*window.innerHeight)) {
                            hasIntersection = true;
                        } else {
                            hasIntersection = false;
                        }
                    }
                } else {
                    if (entry.firstChild && entry.children[0].className == "move-down active")  {
                        entry.children[0].classList.remove('active');
                    }
                }
            }

            // grid animation
            function gridAnim(slide) {
                var items;
                var totalTime;

                if (slide == "slide three")
                    items = document.querySelectorAll(".programming .grid-item");
                else if (slide == "slide four")
                    items = document.querySelectorAll(".graphic .grid-item");

                for (var i = 0;i < items.length;i++) {
                    var itemMove = moveItem(i);
                    setTimeout(itemMove, i*50);
                }
                totalTime = items.length*50;
                
                setTimeout(() => {
                    for (var i = 0;i < items.length;i++) {
                        var itemHover = hoverItem(i);
                        setTimeout(itemHover, i*60);
                    }
                }, totalTime);                                

                function moveItem(i) {
                    return () => { items[i].classList.add('moved'); }
                }
                function hoverItem(i) {
                    return () => { items[i].classList.add('hover-on-spot'); }
                }
            }

            // typewriting animation
            function typewriter(span) {
                var typingDelay = 30;
                var totalTime;
                const cursorDelay = 500;
                const newTextDelay = 500;
                let charIndex = 0;

                const cursor = document.querySelector(".cursor" + span);
                const typedTxtSpan = document.querySelector(span); 
                const word = typedTxtSpan.dataset.text;
                totalTime = word.length * typingDelay;

                var abort = false;
                function type(word, span) {
                    if (!abort) {
                        if (charIndex < word.length) {
                            if (cursor.classList.contains("active"))
                                cursor.classList.remove("active");
                            span.textContent += word.charAt(charIndex);
                            charIndex++;
                            window.addEventListener('click', () => {
                                clearTimeout();
                                span.textContent = word;
                                abort = true;
                            });
                            setTimeout(() => type(word, span), typingDelay);
                        } else {
                            cursor.classList.add("active");
                        }
                    } else {
                        cursor.classList.add("active");
                    }
                }

                cursor.style.color = "lightgreen";
                setTimeout(() => { type(word, typedTxtSpan); }, newTextDelay);
                return totalTime;
            }

            // fireworks animation
            var fireworksDone = false;
            function fireworksAnim(side) {
                var radial_items = document.querySelectorAll('.' + side + ' .radial-item');
                for (var i = 0;i < radial_items.length;i++) {
                    radial_items[i].style.transition = 'none';
                    var itemAppear = showItem(i);
                    setTimeout(itemAppear, i*80);
                }
                setTimeout( () => {
                    for (var i = 0;i < radial_items.length; i++) {
                        radial_items[i].style.transition = 'all 0.3s ease';
                        radial_items[i].style.opacity = '0';
                    }
                }, 750);
                function showItem(i) {
                    return () => { radial_items[i].style.opacity = "1"; }
                }
            }

            // slide animation
            function slideAnim(entry) {
                var slide = entry.className;
                var time = 0;
                const delay = 1200;
                if (slide == "slide three" || slide == "slide four") {
                    gridAnim(slide);
                } else if (slide == "slide seven") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".bloodhound-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide nine") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".nationals-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide eleven") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".dip-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide thirteen") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".ydsp-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide fifteen") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".clock-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide seventeen") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".yep-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide nineteen") {
                    if (entry.dataset.done == "false") {
                        time = typewriter(".piano-intro");
                        entry.dataset.done = "true"
                    }
                } else if (slide == "slide twenty") {
                    if (!fireworksDone) {
                        fireworksAnim('left');
                        setTimeout(() => {
                            fireworksAnim('right');
                        }, 1200);
                        setTimeout(() => {
                            fireworksAnim('left');
                        }, 2400);
                        fireworksDone = true;
                    }
                }
            } 

            // on load
            window.onload = () => {
                setTimeout(() => {
                    var loader = document.querySelector('.loader');
                    var wrapper = document.querySelector('.wrapper');
                    wrapper.focus();
                    loader.classList.add("fadeOut");
                    loader.children[0].style="transition:.3s; opacity: 0%;";
                    setTimeout(()=>{
                        loader.parentNode.removeChild(loader);
                    },1200);
                },4000);
            };

        </script>
        <script src="./js/three.min.js"></script>
        <script src="./js/MTLLoader.js"></script>
        <script src="./js/OBJLoader.js"></script>
        <script src="./js/v3.js"></script>
    </body>
</html>